{"ast":null,"code":"/**\n * Vega-Lite's singleton logger utility.\n */\nvar __classPrivateFieldSet = this && this.__classPrivateFieldSet || function (receiver, privateMap, value) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to set private field on non-instance\");\n  }\n\n  privateMap.set(receiver, value);\n  return value;\n};\n\nvar __classPrivateFieldGet = this && this.__classPrivateFieldGet || function (receiver, privateMap) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n\n  return privateMap.get(receiver);\n};\n\nvar _level;\n\nimport { Debug, Error as ErrorLevel, Info, logger, Warn } from 'vega-util';\nimport * as message_1 from './message';\nexport { message_1 as message };\n/**\n * Main (default) Vega Logger instance for Vega-Lite.\n */\n\nconst main = logger(Warn);\nlet current = main;\n/**\n * Logger tool for checking if the code throws correct warning.\n */\n\nexport class LocalLogger {\n  constructor() {\n    this.warns = [];\n    this.infos = [];\n    this.debugs = [];\n\n    _level.set(this, Warn);\n  }\n\n  level(_) {\n    if (_) {\n      __classPrivateFieldSet(this, _level, _);\n\n      return this;\n    }\n\n    return __classPrivateFieldGet(this, _level);\n  }\n\n  warn(...args) {\n    if (__classPrivateFieldGet(this, _level) >= Warn) this.warns.push(...args);\n    return this;\n  }\n\n  info(...args) {\n    if (__classPrivateFieldGet(this, _level) >= Info) this.infos.push(...args);\n    return this;\n  }\n\n  debug(...args) {\n    if (__classPrivateFieldGet(this, _level) >= Debug) this.debugs.push(...args);\n    return this;\n  }\n\n  error(...args) {\n    if (__classPrivateFieldGet(this, _level) >= ErrorLevel) throw Error(...args);\n    return this;\n  }\n\n}\n_level = new WeakMap();\nexport function wrap(f) {\n  return () => {\n    current = new LocalLogger();\n    f(current);\n    reset();\n  };\n}\n/**\n * Set the singleton logger to be a custom logger.\n */\n\nexport function set(newLogger) {\n  current = newLogger;\n  return current;\n}\n/**\n * Reset the main logger to use the default Vega Logger.\n */\n\nexport function reset() {\n  current = main;\n  return current;\n}\nexport function error(...args) {\n  current.error(...args);\n}\nexport function warn(...args) {\n  current.warn(...args);\n}\nexport function info(...args) {\n  current.info(...args);\n}\nexport function debug(...args) {\n  current.debug(...args);\n}","map":{"version":3,"sources":["../../../src/log/index.ts"],"names":[],"mappings":"AAAA;;AAEG;;;;;;;;;;;;;;;;;;;;AAEH,SAAQ,KAAR,EAAe,KAAK,IAAI,UAAxB,EAAoC,IAApC,EAA0C,MAA1C,EAAmE,IAAnE,QAA8E,WAA9E;2BACyB,W;sBAAb,O;AAEZ;;AAEG;;AACH,MAAM,IAAI,GAAG,MAAM,CAAC,IAAD,CAAnB;AACA,IAAI,OAAO,GAAoB,IAA/B;AAEA;;AAEG;;AACH,OAAM,MAAO,WAAP,CAAkB;AAAxB,EAAA,WAAA,GAAA;AACS,SAAA,KAAA,GAAe,EAAf;AACA,SAAA,KAAA,GAAe,EAAf;AACA,SAAA,MAAA,GAAgB,EAAhB;;AAEP,IAAA,MAAA,CAAA,GAAA,CAAA,IAAA,EAAiB,IAAjB;AA+BD;;AA3BQ,EAAA,KAAK,CAAC,CAAD,EAAW;AACrB,QAAI,CAAJ,EAAO;AACL,MAAA,sBAAA,CAAA,IAAA,EAAI,MAAJ,EAAc,CAAd,CAAA;;AACA,aAAO,IAAP;AACD;;AACD,WAAA,sBAAA,CAAA,IAAA,EAAA,MAAA,CAAA;AACD;;AAEM,EAAA,IAAI,CAAC,GAAG,IAAJ,EAAwB;AACjC,QAAI,sBAAA,CAAA,IAAA,EAAA,MAAA,CAAA,IAAe,IAAnB,EAAyB,KAAK,KAAL,CAAW,IAAX,CAAgB,GAAG,IAAnB;AACzB,WAAO,IAAP;AACD;;AAEM,EAAA,IAAI,CAAC,GAAG,IAAJ,EAAwB;AACjC,QAAI,sBAAA,CAAA,IAAA,EAAA,MAAA,CAAA,IAAe,IAAnB,EAAyB,KAAK,KAAL,CAAW,IAAX,CAAgB,GAAG,IAAnB;AACzB,WAAO,IAAP;AACD;;AAEM,EAAA,KAAK,CAAC,GAAG,IAAJ,EAAwB;AAClC,QAAI,sBAAA,CAAA,IAAA,EAAA,MAAA,CAAA,IAAe,KAAnB,EAA0B,KAAK,MAAL,CAAY,IAAZ,CAAiB,GAAG,IAApB;AAC1B,WAAO,IAAP;AACD;;AAEM,EAAA,KAAK,CAAC,GAAG,IAAJ,EAAwB;AAClC,QAAI,sBAAA,CAAA,IAAA,EAAA,MAAA,CAAA,IAAe,UAAnB,EAA+B,MAAM,KAAK,CAAC,GAAG,IAAJ,CAAX;AAC/B,WAAO,IAAP;AACD;;AAnCqB;;AAsCxB,OAAM,SAAU,IAAV,CAAe,CAAf,EAA+C;AACnD,SAAO,MAAK;AACV,IAAA,OAAO,GAAG,IAAI,WAAJ,EAAV;AACA,IAAA,CAAC,CAAC,OAAD,CAAD;AACA,IAAA,KAAK;AACN,GAJD;AAKD;AAED;;AAEG;;AACH,OAAM,SAAU,GAAV,CAAc,SAAd,EAAwC;AAC5C,EAAA,OAAO,GAAG,SAAV;AACA,SAAO,OAAP;AACD;AAED;;AAEG;;AACH,OAAM,SAAU,KAAV,GAAe;AACnB,EAAA,OAAO,GAAG,IAAV;AACA,SAAO,OAAP;AACD;AAED,OAAM,SAAU,KAAV,CAAgB,GAAG,IAAnB,EAAuC;AAC3C,EAAA,OAAO,CAAC,KAAR,CAAc,GAAG,IAAjB;AACD;AAED,OAAM,SAAU,IAAV,CAAe,GAAG,IAAlB,EAAsC;AAC1C,EAAA,OAAO,CAAC,IAAR,CAAa,GAAG,IAAhB;AACD;AAED,OAAM,SAAU,IAAV,CAAe,GAAG,IAAlB,EAAsC;AAC1C,EAAA,OAAO,CAAC,IAAR,CAAa,GAAG,IAAhB;AACD;AAED,OAAM,SAAU,KAAV,CAAgB,GAAG,IAAnB,EAAuC;AAC3C,EAAA,OAAO,CAAC,KAAR,CAAc,GAAG,IAAjB;AACD","sourceRoot":"","sourcesContent":["/**\n * Vega-Lite's singleton logger utility.\n */\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to set private field on non-instance\");\n    }\n    privateMap.set(receiver, value);\n    return value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to get private field on non-instance\");\n    }\n    return privateMap.get(receiver);\n};\nvar _level;\nimport { Debug, Error as ErrorLevel, Info, logger, Warn } from 'vega-util';\nimport * as message_1 from './message';\nexport { message_1 as message };\n/**\n * Main (default) Vega Logger instance for Vega-Lite.\n */\nconst main = logger(Warn);\nlet current = main;\n/**\n * Logger tool for checking if the code throws correct warning.\n */\nexport class LocalLogger {\n    constructor() {\n        this.warns = [];\n        this.infos = [];\n        this.debugs = [];\n        _level.set(this, Warn);\n    }\n    level(_) {\n        if (_) {\n            __classPrivateFieldSet(this, _level, _);\n            return this;\n        }\n        return __classPrivateFieldGet(this, _level);\n    }\n    warn(...args) {\n        if (__classPrivateFieldGet(this, _level) >= Warn)\n            this.warns.push(...args);\n        return this;\n    }\n    info(...args) {\n        if (__classPrivateFieldGet(this, _level) >= Info)\n            this.infos.push(...args);\n        return this;\n    }\n    debug(...args) {\n        if (__classPrivateFieldGet(this, _level) >= Debug)\n            this.debugs.push(...args);\n        return this;\n    }\n    error(...args) {\n        if (__classPrivateFieldGet(this, _level) >= ErrorLevel)\n            throw Error(...args);\n        return this;\n    }\n}\n_level = new WeakMap();\nexport function wrap(f) {\n    return () => {\n        current = new LocalLogger();\n        f(current);\n        reset();\n    };\n}\n/**\n * Set the singleton logger to be a custom logger.\n */\nexport function set(newLogger) {\n    current = newLogger;\n    return current;\n}\n/**\n * Reset the main logger to use the default Vega Logger.\n */\nexport function reset() {\n    current = main;\n    return current;\n}\nexport function error(...args) {\n    current.error(...args);\n}\nexport function warn(...args) {\n    current.warn(...args);\n}\nexport function info(...args) {\n    current.info(...args);\n}\nexport function debug(...args) {\n    current.debug(...args);\n}\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}