{"ast":null,"code":"import { createSelector } from \"reselect\";\nimport _ from \"underscore\";\nimport { getSelectedLanguages } from \"./language\";\n\nconst selectData = state => state.chart.data;\n/**\n * Group total websites views by language.\n *\n * @param data Array<{\n *  tags: Array<{name: string}>;\n *  url: string;\n *  website_views: Array<{ date: string, count: string}>\n * }>\n * @param languages Array<{name: string, displayed: bool}>\n *\n * Return: { language: string, views: number }\n *\n *           if (website.tags.name === \"english\") {\n */\n\n\nexport const groupByLanguage = createSelector([selectData, getSelectedLanguages], (data, languages) => {\n  // TODO: Implement\n  // console.log(data[0])\n  // console.log(languages)\n  var cow = data.reduce(function (accumulator, website) {\n    console.log(website.tags[0].name, accumulator);\n    var language = website.tags[0].name;\n\n    if (!accumulator.hasOwnProperty(language)) {\n      console.log(\"heree\");\n      accumulator[language] = 0;\n    }\n\n    var numberOfViewsForThisWebsite = website.website_views.reduce((accumulator, currentValue) => accumulator + parseInt(currentValue.count), 0);\n    accumulator[language] += numberOfViewsForThisWebsite;\n    return accumulator;\n  }, {});\n  console.log(cow); // var size = data.reduce((accumulator, currentValue) => accumulator + currentValue.count, 69 )\n  // console.log(size)\n\n  return [{\n    language: 'howdy',\n    views: 0\n  }, {\n    language: 'howdy1',\n    views: 1\n  }];\n});\n/**\n * Flattened list of daily views.\n *\n * @param data Array<{\n *  tags: <{name: string}>;\n *  url: string;\n *  website_views: Array<{ date: string, count: number}>\n * }>\n * @param languages Array<{name: string, displayed: bool}>\n *\n *\n * Return: Array<{\n *    count: number;\n *    date: string;\n *    website: string;\n * }>\n */\n\nexport const flattenWebsiteViews = createSelector([selectData, getSelectedLanguages], (data, languages) => {\n  return _.flatten(data.filter(website => website.tags.filter(tag => languages.map(lang => lang.name).includes(tag.name)).length > 0).map(website => website.website_views.map(views => {\n    return {\n      count: views.count,\n      date: views.date,\n      website: website.url\n    };\n  })));\n});","map":{"version":3,"sources":["/Users/jg443z/1234/src/selectors/chart.js"],"names":["createSelector","_","getSelectedLanguages","selectData","state","chart","data","groupByLanguage","languages","cow","reduce","accumulator","website","console","log","tags","name","language","hasOwnProperty","numberOfViewsForThisWebsite","website_views","currentValue","parseInt","count","views","flattenWebsiteViews","flatten","filter","tag","map","lang","includes","length","date","url"],"mappings":"AAAA,SAASA,cAAT,QAA+B,UAA/B;AACA,OAAOC,CAAP,MAAc,YAAd;AACA,SAASC,oBAAT,QAAqC,YAArC;;AAEA,MAAMC,UAAU,GAAGC,KAAK,IAAIA,KAAK,CAACC,KAAN,CAAYC,IAAxC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,OAAO,MAAMC,eAAe,GAAGP,cAAc,CAC3C,CAACG,UAAD,EAAaD,oBAAb,CAD2C,EAE3C,CAACI,IAAD,EAAOE,SAAP,KAAqB;AACnB;AACA;AACA;AAEA,MAAIC,GAAG,GACLH,IAAI,CACHI,MADD,CAEE,UAASC,WAAT,EAAsBC,OAAtB,EAA+B;AAC7BC,IAAAA,OAAO,CAACC,GAAR,CAAYF,OAAO,CAACG,IAAR,CAAa,CAAb,EAAgBC,IAA5B,EAAkCL,WAAlC;AACA,QAAIM,QAAQ,GAAGL,OAAO,CAACG,IAAR,CAAa,CAAb,EAAgBC,IAA/B;;AACA,QAAI,CAACL,WAAW,CAACO,cAAZ,CAA2BD,QAA3B,CAAL,EAA2C;AACzCJ,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAH,MAAAA,WAAW,CAACM,QAAD,CAAX,GAAwB,CAAxB;AACD;;AAED,QAAIE,2BAA2B,GAAGP,OAAO,CAACQ,aAAR,CAC/BV,MAD+B,CAE9B,CAACC,WAAD,EAAcU,YAAd,KACEV,WAAW,GAAGW,QAAQ,CAACD,YAAY,CAACE,KAAd,CAHM,EAI9B,CAJ8B,CAAlC;AAMAZ,IAAAA,WAAW,CAACM,QAAD,CAAX,IAAyBE,2BAAzB;AACA,WAAOR,WAAP;AACD,GAlBH,EAmBE,EAnBF,CADF;AAsBAE,EAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ,EA3BmB,CA4BnB;AACA;;AACA,SAAO,CAAC;AAACQ,IAAAA,QAAQ,EAAE,OAAX;AAAoBO,IAAAA,KAAK,EAAC;AAA1B,GAAD,EAA+B;AAACP,IAAAA,QAAQ,EAAE,QAAX;AAAqBO,IAAAA,KAAK,EAAE;AAA5B,GAA/B,CAAP;AACD,CAjC0C,CAAtC;AAoCP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,mBAAmB,GAAGzB,cAAc,CAC/C,CAACG,UAAD,EAAaD,oBAAb,CAD+C,EAE/C,CAACI,IAAD,EAAOE,SAAP,KAAqB;AACnB,SAAOP,CAAC,CAACyB,OAAF,CACLpB,IAAI,CACDqB,MADH,CAEIf,OAAO,IACLA,OAAO,CAACG,IAAR,CAAaY,MAAb,CAAoBC,GAAG,IACrBpB,SAAS,CAACqB,GAAV,CAAcC,IAAI,IAAIA,IAAI,CAACd,IAA3B,EAAiCe,QAAjC,CAA0CH,GAAG,CAACZ,IAA9C,CADF,EAEEgB,MAFF,GAEW,CALjB,EAOGH,GAPH,CAOOjB,OAAO,IACVA,OAAO,CAACQ,aAAR,CAAsBS,GAAtB,CAA0BL,KAAK,IAAI;AACjC,WAAO;AACLD,MAAAA,KAAK,EAAEC,KAAK,CAACD,KADR;AAELU,MAAAA,IAAI,EAAET,KAAK,CAACS,IAFP;AAGLrB,MAAAA,OAAO,EAAEA,OAAO,CAACsB;AAHZ,KAAP;AAKD,GAND,CARJ,CADK,CAAP;AAkBD,CArB8C,CAA1C","sourcesContent":["import { createSelector } from \"reselect\";\nimport _ from \"underscore\";\nimport { getSelectedLanguages } from \"./language\";\n\nconst selectData = state => state.chart.data;\n\n/**\n * Group total websites views by language.\n *\n * @param data Array<{\n *  tags: Array<{name: string}>;\n *  url: string;\n *  website_views: Array<{ date: string, count: string}>\n * }>\n * @param languages Array<{name: string, displayed: bool}>\n *\n * Return: { language: string, views: number }\n *\n *           if (website.tags.name === \"english\") {\n */\nexport const groupByLanguage = createSelector(\n  [selectData, getSelectedLanguages],\n  (data, languages) => {\n    // TODO: Implement\n    // console.log(data[0])\n    // console.log(languages)\n\n    var cow =\n      data\n      .reduce(\n        function(accumulator, website) {\n          console.log(website.tags[0].name, accumulator)\n          var language = website.tags[0].name\n          if (!accumulator.hasOwnProperty(language)) {\n            console.log(\"heree\")\n            accumulator[language] = 0;\n          }\n\n          var numberOfViewsForThisWebsite = website.website_views\n            .reduce(\n              (accumulator, currentValue) =>\n                accumulator + parseInt(currentValue.count),\n              0\n            )\n          accumulator[language] += numberOfViewsForThisWebsite\n          return accumulator\n        },\n        {}\n      )\n    console.log(cow)\n    // var size = data.reduce((accumulator, currentValue) => accumulator + currentValue.count, 69 )\n    // console.log(size)\n    return [{language: 'howdy', views:0}, {language: 'howdy1', views: 1}];\n  }\n);\n\n/**\n * Flattened list of daily views.\n *\n * @param data Array<{\n *  tags: <{name: string}>;\n *  url: string;\n *  website_views: Array<{ date: string, count: number}>\n * }>\n * @param languages Array<{name: string, displayed: bool}>\n *\n *\n * Return: Array<{\n *    count: number;\n *    date: string;\n *    website: string;\n * }>\n */\nexport const flattenWebsiteViews = createSelector(\n  [selectData, getSelectedLanguages],\n  (data, languages) => {\n    return _.flatten(\n      data\n        .filter(\n          website =>\n            website.tags.filter(tag =>\n              languages.map(lang => lang.name).includes(tag.name)\n            ).length > 0\n        )\n        .map(website =>\n          website.website_views.map(views => {\n            return {\n              count: views.count,\n              date: views.date,\n              website: website.url\n            };\n          })\n        )\n    );\n  }\n);\n"]},"metadata":{},"sourceType":"module"}